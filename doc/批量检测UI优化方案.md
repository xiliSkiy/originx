# 批量检测 UI 优化方案

## 产品需求分析

### 用户场景
1. **快速概览**：用户需要快速了解批量检测的整体情况
2. **问题定位**：快速找出异常图片，了解具体问题
3. **详细分析**：查看单个图片的详细检测结果
4. **数据导出**：导出检测报告用于后续分析

### 当前问题
- 信息展示过于简单，只有状态和结果
- 缺少汇总统计信息
- 无法快速筛选异常图片
- 缺少主要问题的展示
- 无法查看单个图片的详细信息

## 设计方案

### 1. 信息架构

```
批量检测结果页面
├── 汇总统计区（顶部）
│   ├── 总数量、正常数、异常数
│   ├── 异常率
│   ├── 问题分布（饼图/柱状图）
│   └── 检测耗时
│
├── 筛选工具栏
│   ├── 状态筛选（全部/正常/异常）
│   ├── 问题类型筛选
│   ├── 严重程度筛选
│   └── 搜索框（文件名）
│
├── 结果列表（表格/卡片）
│   ├── 缩略图
│   ├── 文件名
│   ├── 检测状态
│   ├── 主要问题（中文）
│   ├── 严重程度
│   ├── 异常指标数量
│   └── 操作按钮（查看详情/下载报告）
│
└── 详情面板（侧边栏/弹窗）
    ├── 图片预览
    ├── 检测结果详情
    ├── 各指标得分
    └── 改进建议
```

### 2. 视觉设计

#### 2.1 汇总统计卡片
- **总数量卡片**：显示总数，正常数（绿色），异常数（红色）
- **异常率卡片**：百分比显示，进度条可视化
- **问题分布卡片**：饼图或柱状图，显示各问题类型的数量
- **检测耗时卡片**：总耗时和平均耗时

#### 2.2 结果列表设计

**方案A：表格视图（推荐）**
- 优点：信息密度高，适合大量数据
- 列设计：
  - 缩略图（80px）
  - 文件名（可排序）
  - 状态（标签：正常/异常）
  - 主要问题（中文，可筛选）
  - 严重程度（标签：正常/警告/严重）
  - 异常指标数（数字徽章）
  - 操作（查看详情按钮）

**方案B：卡片视图**
- 优点：视觉效果好，适合少量数据
- 卡片内容：
  - 图片缩略图（大）
  - 文件名
  - 状态标签
  - 主要问题
  - 异常指标数量
  - 查看详情按钮

**方案C：混合视图**
- 默认表格视图，支持切换到卡片视图
- 用户可根据数据量选择

#### 2.3 详情面板设计
- **侧边栏形式**（推荐）：不遮挡列表，可快速切换查看
- **弹窗形式**：全屏展示，适合详细分析
- 内容：
  - 图片大图预览
  - 检测结果概览（状态、主要问题、严重程度）
  - 各指标详情（表格或卡片）
  - 改进建议列表

### 3. 交互设计

#### 3.1 筛选交互
- **状态筛选**：标签页切换（全部/正常/异常）
- **问题类型筛选**：下拉多选
- **严重程度筛选**：单选按钮组
- **搜索**：实时搜索文件名

#### 3.2 排序功能
- 默认：按检测时间倒序
- 可排序字段：文件名、状态、异常指标数

#### 3.3 批量操作
- 全选/反选
- 批量导出报告
- 批量下载异常图片

#### 3.4 详情查看
- 点击"查看详情"按钮
- 侧边栏滑出显示详情
- 支持键盘导航（上下切换）

### 4. 数据展示优化

#### 4.1 状态展示
- **待检测**：灰色标签
- **检测中**：蓝色标签 + 加载动画
- **正常**：绿色标签 + ✅
- **异常**：红色标签 + ⚠️
- **失败**：灰色标签 + ❌

#### 4.2 主要问题展示
- 显示中文名称（如"高斯噪声"）
- 如果多个问题，显示"主要问题 + N个其他问题"
- 点击可展开查看所有问题

#### 4.3 严重程度展示
- **正常**：绿色标签
- **提示**：蓝色标签
- **警告**：黄色标签
- **严重**：红色标签

#### 4.4 异常指标数
- 数字徽章显示
- 颜色：绿色（0个异常）、黄色（1-2个）、红色（3个以上）

### 5. 响应式设计

- **桌面端**：表格视图，侧边栏详情
- **平板端**：卡片视图，弹窗详情
- **移动端**：列表视图，全屏详情

### 6. 性能优化

- 虚拟滚动（大量数据时）
- 图片懒加载
- 分页加载（每页20-50条）
- 详情面板按需加载

## 实现优先级

### P0（必须）
1. 汇总统计卡片
2. 状态筛选
3. 主要问题展示（中文）
4. 详情查看功能

### P1（重要）
1. 问题类型筛选
2. 严重程度筛选
3. 搜索功能
4. 排序功能

### P2（优化）
1. 视图切换（表格/卡片）
2. 批量操作
3. 导出报告
4. 键盘导航

## 技术实现建议

1. **组件选择**：
   - 表格：Element Plus Table
   - 图表：ECharts
   - 详情面板：Element Plus Drawer

2. **状态管理**：
   - 使用 Pinia 管理批量检测结果
   - 缓存已加载的详情数据

3. **数据流**：
   - 检测完成后，更新每个文件的状态和结果
   - 实时计算汇总统计
   - 详情面板按需加载
